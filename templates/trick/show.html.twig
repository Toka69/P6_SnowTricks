{% extends 'base.html.twig' %}

{% block title %}Trick details{% endblock %}

{% block body %}
        <div class="container mt-5 pt-3 border rounded">
                <div class="hero-trick-image mb-3" style="background-image: linear-gradient(rgba(0,0,0,.5), rgba(0,0,0,.5)), url('{{ cover.location }}')">
                        <div class="hero-text">
                                <h1>{{ trick.name|capitalize }}</h1>
                        </div>
                </div>
                <div class="row">
                        {% for photo in trick.photos %}
                        <div class="col-md-3">
                                <div class="card mb-2">
                                        <img src="{{ photo.location }}" alt="trick" class="img-fluid" style="height: 150px">
                                        <div class="card-body d-flex justify-content-end">
                                                <div>
                                                        <a href="#" class="mr-3"><i class="fas fa-pencil-alt"></i></a>
                                                        <a href="#"><i class="fas fa-trash-alt"></i></a>
                                                </div>
                                        </div>
                                </div>
                        </div>
                        {% endfor %}
                        {% for video in trick.videos %}
                        <div class="col-md-3">
                                <div class="card mb-2">
                                        <iframe  src={{ video.location }} frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                        <div class="card-body d-flex justify-content-end">
                                                <div>
                                                        <a href="#" class="mr-3"><i class="fas fa-pencil-alt"></i></a>
                                                        <a href="#"><i class="fas fa-trash-alt"></i></a>
                                                </div>
                                        </div>
                                </div>
                        </div>
                        {% endfor %}
                </div>
                <div class="mt-5 mb-5">
                        <h3>Description :</h3>
                        <article>
                                {{ trick.description }}
                        </article>
                </div>
                <div class="row justify-content-around border rounded pt-3 pb-3 ml-3 mr-3">
                        <a href="{{ path('trick_category', {'slug': trick.category.slug}) }}"><span class="badge badge-primary p-2">{{ trick.category.name }}</span></a>
                        <p>Author: {{ trick.user.firstName }} {{ trick.user.lastName }}</p>
                        <p>Created: {{ trick.createdDate|date }}</p>
                        <p>Modified: {{ trick.modifiedDate|date }}</p>
                </div>
                <hr/>
                <div class="container col-md-8 mt-5">
                        <form method="post" action="">
                                <fieldset>
                                        <div class="form-group">
                                                <textarea class="form-control" id="formControlTextareaMessage" name="message" rows="3" placeholder="Leave a comment" required></textarea>
                                        </div>
                                        <input type="hidden" name="csrfToken" value="" />
                                        <button type="submit" class="btn btn-success">Submit</button>
                                </fieldset>
                        </form>
                </div>
                <hr/>
                <div class="container col-md-8 mt-5">
                        <h6>Comments :</h6>
                        <ul id="myList">
                        {% for comment in trick.comments %}
                                <li class="card mt-1">
                                        <div class="card-body">
                                                <p class="card-text">
                                                        {{ comment.content }}
                                                </p>
                                        </div>
                                        <div class="card-footer text-muted text-right">
                                                <div>Author : {{ comment.user.firstName }} {{ comment.user.lastName }}</div>
                                                <div>Created date : {{ comment.createdDate|date }}</div>
                                        </div>
                                </li>
                        {% endfor %}
                        </ul>
                        <div class="text-center mb-5">
                                <button class="btn btn-primary" id="loadMore">Load More</button>
                        </div>
                </div>
        </div>
{% endblock %}

{% block javascripts_custom %}
        <script type="text/javascript">
                $(document).ready(function () {
                        $( document.body ).append( $( "<li>" ) );
                        var size_li = $( "#myList li" ).length;
                        x = 10;
                        $('#myList li:lt('+x+')').show();
                        $('#loadMore').click(function () {
                                x= (x+1 <= size_li) ? x+1 : size_li;
                                $('#myList li:lt('+x+')').show();
                                if(x === size_li){
                                        $('#loadMore').hide();
                                }
                        });
                });
        </script>
{% endblock %}
